{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":["file:///D:/Desenvolvimento/sala-estimativa/pages/delete-rooms.js"],"sourcesContent":["// pages/delete-rooms.js\r\nimport { useState, useEffect } from \"react\";\r\nimport { getDB } from \"../lib/firebaseClient\";\r\nimport { ref, onValue } from \"firebase/database\";\r\n\r\nexport default function DeleteRoomsPage() {\r\n  const [rooms, setRooms] = useState({});\r\n  const [password, setPassword] = useState(\"\");\r\n  const [message, setMessage] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    const db = getDB(); // üî• Agora NUNCA √© null\r\n\r\n    const roomsRef = ref(db, \"salas\");\r\n\r\n    const unsubscribe = onValue(roomsRef, (snap) => {\r\n      setRooms(snap.val() || {});\r\n    });\r\n\r\n    return () => unsubscribe();\r\n  }, []);\r\n\r\n  const deleteRoom = async (roomId) => {\r\n    const res = await fetch(\"/api/delete-rooms\", {\r\n      method: \"POST\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify({ roomId, password }),\r\n    });\r\n\r\n    const data = await res.json();\r\n    setMessage(data.message);\r\n  };\r\n\r\n  const clearMembers = async (roomId) => {\r\n    const res = await fetch(\"/api/clear-members\", {\r\n      method: \"POST\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify({ roomId, password }),\r\n    });\r\n\r\n    const data = await res.json();\r\n    setMessage(data.message);\r\n  };\r\n\r\n  return (\r\n    <div style={{ display: \"flex\" }}>\r\n\r\n      <div style={{ padding: 20, width: \"100%\" }}>\r\n        <h1>Apagar Salas</h1>\r\n\r\n        <div style={{ marginBottom: 20 }}>\r\n          <label>\r\n            Senha administrativa:<br />\r\n            <input\r\n              type=\"password\"\r\n              value={password}\r\n              onChange={(e) => setPassword(e.target.value)}\r\n              style={{ padding: 8, width: 300 }}\r\n              required\r\n            />\r\n          </label>\r\n        </div>\r\n\r\n        <h2>Salas existentes</h2>\r\n\r\n        {Object.keys(rooms).length === 0 && <p>Nenhuma sala criada.</p>}\r\n\r\n        <ul>\r\n          {Object.entries(rooms).map(([id, sala]) => (\r\n            <li key={id} style={{ marginBottom: 10 }}>\r\n              <strong>{sala.nome}</strong>\r\n\r\n              <button\r\n                style={{ marginLeft: 10, background: \"#0a74da\", color: \"white\" }}\r\n                onClick={() => clearMembers(id)}\r\n              >\r\n                üßπ Limpar membros\r\n              </button>\r\n\r\n              <button\r\n                style={{ marginLeft: 10, background: \"red\", color: \"white\" }}\r\n                onClick={() => deleteRoom(id)}\r\n              >\r\n                ‚ùå Apagar sala\r\n              </button>\r\n            </li>\r\n          ))}\r\n        </ul>\r\n\r\n        <hr />\r\n\r\n        <button\r\n          onClick={() => deleteRoom(\"***\")}\r\n          style={{ marginTop: 20, color: \"white\", background: \"red\" }}\r\n        >\r\n          Apagar TODAS as salas\r\n        </button>\r\n\r\n        {message && (\r\n          <p style={{ marginTop: 20, color: \"blue\" }}>{message}</p>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"AAAA,wBAAwB;;;;;;AACxB;AACA;AACA;;;;;;;;;;AAEe,SAAS;IACtB,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,+GAAQ,EAAC,CAAC;IACpC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,+GAAQ,EAAC;IACzC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,+GAAQ,EAAC;IAEvC,IAAA,gHAAS,EAAC;QACR,MAAM,KAAK,IAAA,uHAAK,KAAI,wBAAwB;QAE5C,MAAM,WAAW,IAAA,+IAAG,EAAC,IAAI;QAEzB,MAAM,cAAc,IAAA,mJAAO,EAAC,UAAU,CAAC;YACrC,SAAS,KAAK,GAAG,MAAM,CAAC;QAC1B;QAEA,OAAO,IAAM;IACf,GAAG,EAAE;IAEL,MAAM,aAAa,OAAO;QACxB,MAAM,MAAM,MAAM,MAAM,qBAAqB;YAC3C,QAAQ;YACR,SAAS;gBAAE,gBAAgB;YAAmB;YAC9C,MAAM,KAAK,SAAS,CAAC;gBAAE;gBAAQ;YAAS;QAC1C;QAEA,MAAM,OAAO,MAAM,IAAI,IAAI;QAC3B,WAAW,KAAK,OAAO;IACzB;IAEA,MAAM,eAAe,OAAO;QAC1B,MAAM,MAAM,MAAM,MAAM,sBAAsB;YAC5C,QAAQ;YACR,SAAS;gBAAE,gBAAgB;YAAmB;YAC9C,MAAM,KAAK,SAAS,CAAC;gBAAE;gBAAQ;YAAS;QAC1C;QAEA,MAAM,OAAO,MAAM,IAAI,IAAI;QAC3B,WAAW,KAAK,OAAO;IACzB;IAEA,qBACE,qKAAC;QAAI,OAAO;YAAE,SAAS;QAAO;kBAE5B,cAAA,qKAAC;YAAI,OAAO;gBAAE,SAAS;gBAAI,OAAO;YAAO;;8BACvC,qKAAC;8BAAG;;;;;;8BAEJ,qKAAC;oBAAI,OAAO;wBAAE,cAAc;oBAAG;8BAC7B,cAAA,qKAAC;;4BAAM;0CACgB,qKAAC;;;;;0CACtB,qKAAC;gCACC,MAAK;gCACL,OAAO;gCACP,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;gCAC3C,OAAO;oCAAE,SAAS;oCAAG,OAAO;gCAAI;gCAChC,QAAQ;;;;;;;;;;;;;;;;;8BAKd,qKAAC;8BAAG;;;;;;gBAEH,OAAO,IAAI,CAAC,OAAO,MAAM,KAAK,mBAAK,qKAAC;8BAAE;;;;;;8BAEvC,qKAAC;8BACE,OAAO,OAAO,CAAC,OAAO,GAAG,CAAC,CAAC,CAAC,IAAI,KAAK,iBACpC,qKAAC;4BAAY,OAAO;gCAAE,cAAc;4BAAG;;8CACrC,qKAAC;8CAAQ,KAAK,IAAI;;;;;;8CAElB,qKAAC;oCACC,OAAO;wCAAE,YAAY;wCAAI,YAAY;wCAAW,OAAO;oCAAQ;oCAC/D,SAAS,IAAM,aAAa;8CAC7B;;;;;;8CAID,qKAAC;oCACC,OAAO;wCAAE,YAAY;wCAAI,YAAY;wCAAO,OAAO;oCAAQ;oCAC3D,SAAS,IAAM,WAAW;8CAC3B;;;;;;;2BAbM;;;;;;;;;;8BAoBb,qKAAC;;;;;8BAED,qKAAC;oBACC,SAAS,IAAM,WAAW;oBAC1B,OAAO;wBAAE,WAAW;wBAAI,OAAO;wBAAS,YAAY;oBAAM;8BAC3D;;;;;;gBAIA,yBACC,qKAAC;oBAAE,OAAO;wBAAE,WAAW;wBAAI,OAAO;oBAAO;8BAAI;;;;;;;;;;;;;;;;;AAKvD"}}]
}