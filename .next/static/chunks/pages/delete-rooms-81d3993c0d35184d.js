(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{7890:(e,r,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/delete-rooms",function(){return t(3358)}])},4482:(e,r,t)=>{"use strict";t.d(r,{A:()=>l});var a=t(4848),n=t(6715),i=t(9223),o=t(9141),s=t(1032);function l(e){let{user:r,onLeaveRoom:t}=e,l=(0,n.useRouter)();function c(){if(r)return r;try{let e=(0,i.rf)();return(0,s.xI)(e).currentUser}catch(e){return null}}async function d(){try{let e=localStorage.getItem("roomId"),r=c();if(!e||!r)return;let t=r.uid,a=(0,i.xA)();if(!a)return;await (0,o.TF)((0,o.KR)(a,"salas/".concat(e,"/participantes/").concat(t))),localStorage.removeItem("roomId")}catch(e){console.error("Erro ao remover participante:",e)}}async function u(e){try{if(t)try{t()}catch(e){console.warn("Erro no onLeaveRoom:",e)}await d()}finally{l.push(e)}}async function p(){await d(),await (0,i.ri)(),l.push("/login")}let h=c();return(0,a.jsx)("nav",{children:(0,a.jsxs)("ul",{style:{listStyle:"none",padding:"20px",margin:0,width:"220px",height:"100vh",backgroundColor:"#222",color:"white",borderRight:"1px solid #444",boxSizing:"border-box"},children:[h&&(0,a.jsxs)("li",{style:{marginBottom:"20px"},children:[(0,a.jsx)("strong",{children:h.displayName}),(0,a.jsx)("br",{}),(0,a.jsx)("small",{children:h.email}),(0,a.jsx)("hr",{style:{border:"none",borderBottom:"1px solid #444",marginTop:"15px"}})]}),(0,a.jsx)("li",{style:{marginBottom:"10px",cursor:"pointer"},onClick:()=>u("/"),children:"\uD83C\uDFE0 Home"}),(0,a.jsx)("hr",{style:{margin:"15px 0",border:"none",borderBottom:"1px solid #444"}}),(0,a.jsx)("li",{style:{marginBottom:"10px",cursor:"pointer"},onClick:()=>u("/create-rooms"),children:"\uD83C\uDFD7️ Criar Salas"}),(0,a.jsx)("li",{style:{marginBottom:"10px",cursor:"pointer"},onClick:()=>u("/delete-rooms"),children:"\uD83D\uDDD1️ Apagar Salas"}),(0,a.jsx)("hr",{style:{margin:"15px 0",border:"none",borderBottom:"1px solid #444"}}),(0,a.jsx)("li",{style:{marginTop:"20px",cursor:"pointer",padding:"10px",background:"#e74c3c",color:"white",textAlign:"center",borderRadius:"8px",fontWeight:"bold"},onClick:p,children:"\uD83D\uDEAA Sair"})]})})}},9223:(e,r,t)=>{"use strict";t.d(r,{XL:()=>x,YM:()=>u,ap:()=>m,rf:()=>p,ri:()=>g,xA:()=>h});var a=t(223),n=t(9141),i=t(1032);let o={apiKey:"AIzaSyCe7rmZj0-vVcAobBeqpyhhqq3DIgP5B28",authDomain:"sala-de-estimativa.firebaseapp.com",databaseURL:"https://sala-de-estimativa-default-rtdb.firebaseio.com/",projectId:"sala-de-estimativa",storageBucket:"sala-de-estimativa.firebasestorage.app",messagingSenderId:"587703034452",appId:"1:587703034452:web:0e50bcc1f2205d34a543c1"},s=null,l=null,c=null,d=null;function u(){return s||(s=(0,a.Dk)().length?(0,a.Sx)():(0,a.Wp)(o),l=(0,n.C3)(s),c=(0,i.xI)(s),d=new i.HF),s}function p(){return s||u(),s}function h(){return l||u(),l}function m(){return c||u(),c}function x(){return(0,i.df)(m(),d)}function g(){return(0,i.CI)(m())}},3358:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>l});var a=t(4848),n=t(6540),i=t(9223),o=t(9141),s=t(4482);function l(){let[e,r]=(0,n.useState)({}),[t,l]=(0,n.useState)(""),[c,d]=(0,n.useState)("");(0,n.useEffect)(()=>{let e=(0,i.xA)(),t=(0,o.KR)(e,"salas"),a=(0,o.Zy)(t,e=>{r(e.val()||{})});return()=>a()},[]);let u=async e=>{let r=await fetch("/api/delete-rooms",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({roomId:e,password:t})});d((await r.json()).message)},p=async e=>{let r=await fetch("/api/clear-members",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({roomId:e,password:t})});d((await r.json()).message)};return(0,a.jsxs)("div",{style:{display:"flex"},children:[(0,a.jsx)(s.A,{}),(0,a.jsxs)("div",{style:{padding:20,width:"100%"},children:[(0,a.jsx)("h1",{children:"Apagar Salas"}),(0,a.jsx)("div",{style:{marginBottom:20},children:(0,a.jsxs)("label",{children:["Senha administrativa:",(0,a.jsx)("br",{}),(0,a.jsx)("input",{type:"password",value:t,onChange:e=>l(e.target.value),style:{padding:8,width:300},required:!0})]})}),(0,a.jsx)("h2",{children:"Salas existentes"}),0===Object.keys(e).length&&(0,a.jsx)("p",{children:"Nenhuma sala criada."}),(0,a.jsx)("ul",{children:Object.entries(e).map(e=>{let[r,t]=e;return(0,a.jsxs)("li",{style:{marginBottom:10},children:[(0,a.jsx)("strong",{children:t.nome}),(0,a.jsx)("button",{style:{marginLeft:10,background:"#0a74da",color:"white"},onClick:()=>p(r),children:"\uD83E\uDDF9 Limpar membros"}),(0,a.jsx)("button",{style:{marginLeft:10,background:"red",color:"white"},onClick:()=>u(r),children:"❌ Apagar sala"})]},r)})}),(0,a.jsx)("hr",{}),(0,a.jsx)("button",{onClick:()=>u("***"),style:{marginTop:20,color:"white",background:"red"},children:"Apagar TODAS as salas"}),c&&(0,a.jsx)("p",{style:{marginTop:20,color:"blue"},children:c})]})]})}},6715:(e,r,t)=>{e.exports=t(8440)}},e=>{var r=r=>e(e.s=r);e.O(0,[505,247,548,636,593,792],()=>r(7890)),_N_E=e.O()}]);